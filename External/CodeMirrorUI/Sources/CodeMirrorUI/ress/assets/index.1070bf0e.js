import{C as T,L as E,a as D,S as A,H as M,u as B,w,o as H,g as z,E as f,r as p,b as y,c as v,k as O,d as W,e as $,f as F,s as K,h as N,l as P,i as U,j as V,m as q,n as j,p as G,q as I,t as _,v as b,x as R,y as J,z as Q}from"./vendor.760db3f5.js";const X=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerpolicy&&(i.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?i.credentials="include":o.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=n(o);fetch(o.href,i)}};X();const h={theme:new T},Y=[h.theme.of([])];function Z(e){return Promise.resolve().then(function(){return new D(A.define(e))})}const ee=E.of({name:"Shell",load(){return Z(re)}});var g={};function k(e,t){for(var n=0;n<t.length;n++)g[t[n]]=e}var x=["true","false"],S=["if","then","do","else","elif","while","until","for","in","esac","fi","fin","fil","done","exit","set","unset","export","function","alias"],C=["ab","awk","bash","beep","cat","cc","cd","chown","chmod","chroot","clear","cp","curl","cut","diff","echo","find","gawk","gcc","get","git","grep","hg","kill","killall","ln","ls","make","mkdir","openssl","mv","nc","nl","node","npm","ping","ps","restart","rm","rmdir","sed","service","sh","shopt","shred","source","sort","sleep","ssh","start","stop","su","sudo","svn","tee","telnet","top","touch","vi","vim","wall","wc","wget","who","write","yes","zsh"];k("atom",x);k("keyword",S);k("builtin",C);function te(e,t){if(e.eatSpace())return null;var n=e.sol(),r=e.next();if(r==="\\")return e.next(),null;if(r==="'"||r==='"'||r==="`")return t.tokens.unshift(d(r,r==="`"?"quote":"string")),u(e,t);if(r==="#")return n&&e.eat("!")?(e.skipToEnd(),"meta"):(e.skipToEnd(),"comment");if(r==="$")return t.tokens.unshift(L),u(e,t);if(r==="+"||r==="=")return"operator";if(r==="-")return e.eat("-"),e.eatWhile(/\w/),"attribute";if(r=="<"){if(e.match("<<"))return"operator";var o=e.match(/^<-?\s*['"]?([^'"]*)['"]?/);if(o)return t.tokens.unshift(oe(o[1])),"string.special"}if(/\d/.test(r)&&(e.eatWhile(/\d/),e.eol()||!/\w/.test(e.peek())))return"number";e.eatWhile(/[\w-]/);var i=e.current();return e.peek()==="="&&/\w+/.test(i)?"def":g.hasOwnProperty(i)?g[i]:null}function d(e,t){var n=e=="("?")":e=="{"?"}":e;return function(r,o){for(var i,s=!1;(i=r.next())!=null;){if(i===n&&!s){o.tokens.shift();break}else if(i==="$"&&!s&&e!=="'"&&r.peek()!=n){s=!0,r.backUp(1),o.tokens.unshift(L);break}else{if(!s&&e!==n&&i===e)return o.tokens.unshift(d(e,t)),u(r,o);if(!s&&/['"]/.test(i)&&!/['"]/.test(e)){o.tokens.unshift(ne(i,"string")),r.backUp(1);break}}s=!s&&i==="\\"}return t}}function ne(e,t){return function(n,r){return r.tokens[0]=d(e,t),n.next(),u(n,r)}}var L=function(e,t){t.tokens.length>1&&e.eat("$");var n=e.next();return/['"({]/.test(n)?(t.tokens[0]=d(n,n=="("?"quote":n=="{"?"def":"string"),u(e,t)):(/\d/.test(n)||e.eatWhile(/\w/),t.tokens.shift(),"def")};function oe(e){return function(t,n){return t.sol()&&t.string==e&&n.tokens.shift(),t.skipToEnd(),"string.special"}}function u(e,t){return(t.tokens[0]||te)(e,t)}const re={startState:function(){return{tokens:[]}},token:function(e,t){return u(e,t)},languageData:{autocomplete:x.map(e=>({label:e,type:"enum"})).concat(S.map(e=>({type:"keyword",label:e})),C.map(e=>({label:e,type:"method"}))),closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"#"}}},ie=M.define([]),se=e=>{const t=B({});w([t,e],([n])=>{!e.value||(n?e.value.dispatch({effects:[h.theme.reconfigure(H)]}):e.value.dispatch({effects:[h.theme.reconfigure(z)]}))},{immediate:!0,flush:"post"})};f.theme({"&":{height:"100%"}});const ae=e=>{const t=p(),n=p(),{onChange:r}=e;return y(async()=>{if(!t.value)return;const o=await ee.load().then(a=>a.extension),i=v.create({doc:e.initialDoc,extensions:[o,O.of([...W,...$,{key:"Mod-s",run(a){return!1},preventDefault:!0},{key:"Tab",run(a){return F(a)}},{key:"Shift-Space",run:K}]),N(),P(),U(),V(),q.fallback,j(),G(),v.tabSize.of(2),I(),ie,...Y,f.lineWrapping,f.updateListener.of(a=>{a.changes&&r&&r(a.state)})]}),s=new f({state:i,parent:t.value});n.value=s}),se(n),[t,n]};const ce=_({props:{deafultText:{type:String,required:!1},text:{type:String,required:!1},onChange:{type:Function,required:!1},onStateChange:{type:Function,required:!1}},emits:["update:value","update:state"],setup(e,{emit:t}){var i,s;const n=e,[r,o]=ae({initialDoc:(s=(i=n.text)!=null?i:n.deafultText)!=null?s:"",onChange:a=>{var l,m;const c=a.doc.toString();t("update:state",a),t("update:value",c),(l=n.onChange)==null||l.call(n,a.doc.toString()),(m=n.onStateChange)==null||m.call(n,a)}});return w(()=>n.text,function a(c){const l=o.value;if(!l)return requestAnimationFrame(()=>a(c));c!==l.state.doc.toString()&&l.dispatch({changes:{from:0,to:l.state.doc.length,insert:c}})}),y(()=>{var a,c;"webkit"in window||(a=r.value)==null||a.classList.add("in-browser"),(c=o.value)==null||c.focus()}),(a,c)=>(b(),R("div",{ref_key:"refContainer",ref:r,class:"editor"},null,512))}});const le=_({setup(e){const t=p(""),n=o=>{t.value=o};window.setText=n,window.setSize=o=>{document.documentElement.style.fontSize=`${o}px`};const r=o=>{var s;const i={magic:"content",msg:o};(s=window.webkit)==null||s.messageHandlers.callbackHandler.postMessage(i),t.value=o};return(o,i)=>(b(),J(ce,{text:t.value,"onUpdate:value":r},null,8,["text"]))}}),ue=Q(le);ue.mount("#app");
